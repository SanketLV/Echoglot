# Technology Stack

> Auto-generated by /map on 2026-02-22

## Runtime

| Technology | Version | Purpose |
|------------|---------|---------|
| Node.js | â‰¥20.0.0 | Core runtime |
| pnpm | 9.15.4 | Package manager |
| TypeScript | ^5.7.3 | Language (all packages) |

## Monorepo

| Tool | Version | Purpose |
|------|---------|---------|
| Turborepo | ^2.3.3 | Build orchestration & caching |
| pnpm workspaces | - | Workspace dependency management |

## Frontend (`apps/web`)

### Production Dependencies

| Package | Version | Purpose |
|---------|---------|---------|
| next | ^15.1.6 | React framework (App Router) |
| react | ^19.0.0 | UI library |
| react-dom | ^19.0.0 | React DOM renderer |
| @supabase/ssr | ^0.5.2 | Supabase auth (server-side) |
| @supabase/supabase-js | ^2.48.1 | Supabase client |
| @tanstack/react-query | ^5.64.2 | Server state management |
| zustand | ^5.0.3 | Client state management |
| zod | ^3.24.1 | Schema validation |
| lucide-react | ^0.469.0 | Icon library |
| next-themes | ^0.4.4 | Dark/light mode |

### Development Dependencies

| Package | Version | Purpose |
|---------|---------|---------|
| tailwindcss | ^3.4.17 | Utility-first CSS |
| tailwindcss-animate | ^1.0.7 | Tailwind animation plugin |
| autoprefixer | ^10.4.20 | CSS vendor prefixes |
| postcss | ^8.4.49 | CSS processing |
| eslint | ^8.57.0 | Linting |
| typescript | ^5.7.3 | Type checking |

## Backend (`services/api-gateway`)

### Production Dependencies

| Package | Version | Purpose |
|---------|---------|---------|
| fastify | ^5.2.1 | HTTP framework |
| @fastify/cors | ^10.0.2 | CORS middleware |
| @fastify/websocket | ^11.0.1 | WebSocket support |
| fastify-plugin | ^5.0.1 | Plugin utilities |
| @supabase/supabase-js | ^2.48.1 | Supabase admin client |
| deepl-node | ^1.14.0 | DeepL translation API |
| ioredis | ^5.4.2 | Redis client |
| zod | ^3.24.1 | Schema validation |
| dotenv | ^17.3.1 | Environment variables |

### Development Dependencies

| Package | Version | Purpose |
|---------|---------|---------|
| tsx | ^4.19.2 | TypeScript execution (dev) |
| pino-pretty | ^13.0.0 | Log formatting (dev) |
| typescript | ^5.7.3 | Type checking |

## Shared Packages

| Package | Purpose |
|---------|---------|
| @echoglot/shared-types | TypeScript type definitions |
| @echoglot/ui | shadcn/ui component library (17 components) |
| @echoglot/eslint-config | Shared ESLint configuration |
| @echoglot/tsconfig | Shared TypeScript configuration |
| @echoglot/tailwind-config | Shared Tailwind CSS configuration |

## Infrastructure

| Service | Provider | Purpose |
|---------|----------|---------|
| PostgreSQL | Supabase | Primary database |
| Authentication | Supabase Auth | User auth + OAuth |
| Redis | Upstash (prod) / Docker (dev) | Translation cache + PubSub |
| Translation | DeepL | Premium translation (European/CJK) |
| Translation | Google Translate | Broad language coverage |
| Translation | MyMemory | Free fallback |

## Configuration

| Variable | Purpose | Location |
|----------|---------|----------|
| NEXT_PUBLIC_SUPABASE_URL | Supabase project URL | `apps/web/.env.local` |
| NEXT_PUBLIC_SUPABASE_ANON_KEY | Supabase anonymous key | `apps/web/.env.local` |
| NEXT_PUBLIC_API_URL | API Gateway URL | `apps/web/.env.local` |
| SUPABASE_URL | Supabase URL (server) | `services/api-gateway/.env` |
| SUPABASE_SERVICE_KEY | Supabase service role key | `services/api-gateway/.env` |
| SUPABASE_ANON_KEY | Supabase anon key | `services/api-gateway/.env` |
| REDIS_URL | Redis connection URL | `services/api-gateway/.env` |
| DEEPL_API_KEY | DeepL API key (optional) | `services/api-gateway/.env` |
| GOOGLE_TRANSLATE_API_KEY | Google Translate key (optional) | `services/api-gateway/.env` |
| TRANSLATION_MOCK | Enable mock translation | `services/api-gateway/.env` |
| PORT | API Gateway port (default: 4000) | `services/api-gateway/.env` |
| CORS_ORIGIN | Allowed CORS origin | `services/api-gateway/.env` |

## Database Schema (11 migrations)

| Migration | Table/Feature |
|-----------|--------------|
| 001 | `users` (id, email, display_name, avatar, langs, subscription, voice_profile) |
| 002 | `user_preferences` |
| 003 | `contacts` |
| 004 | RLS policies for users, preferences, contacts |
| 005 | Auth trigger (auto-create user profile on signup) |
| 006 | `updated_at` trigger |
| 007 | `conversations`, `conversation_members` |
| 008 | `messages` (5000 char limit) |
| 009 | `message_translations` (per target_lang, engine tracked) |
| 010 | Chat RLS policies |
| 011 | `onboarding_complete` column |
